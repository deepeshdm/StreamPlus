<div style="width: 100%; height: 100%;">

    <!-- Main Header -->
    <h2>Adaptive HLS Demo Project ğŸ¬ğŸš€</h2>

    <!-- Project Description -->
    <p style="text-align: center; max-width: 80%; margin: 0 auto; font-size: 1.1rem; line-height: 1.6;">
        Welcome to the Adaptive HLS Demo project! ğŸ¥âœ¨ This is where the magic happens â€” upload your video, and watch as it gets transcoded into multiple resolutions (240p, 360p, 720p, 1080p). ğŸ“½ï¸ Each resolution is split into bite-sized segments, ensuring lightning-fast loading âš¡ and smooth playback ğŸ¶. Thanks to adaptive streaming, your video adjusts on the fly to match your viewers' internet speed ğŸŒ and device capabilities ğŸ“±ğŸ’». Dive into the demo below to see how HLS keeps your video crystal clear ğŸ”® no matter the connection! ğŸŒŸ
    </p>

    <!-- File input for selecting the video -->
    <h3>Select and Upload Your Video</h3>
    <input type="file" (change)="onFileSelected($event)" accept="video/*">
    
    <!-- Upload button with spinner -->
    <button class="upload-btn" (click)="onUpload()" [disabled]="isUploading">
        <div class="spinner" *ngIf="isUploading"></div>
        <div> {{ !isUploading ? 'Upload' : 'Processing...' }} </div>
    </button>
    
    
    <!-- Display error messages -->
    <div style="text-align:center;" *ngIf="uploadProgress != 'Upload successful!' && !isUploading">{{ uploadProgress }}</div>
    
    <!-- View Toggle Button -->
     <div style="display:flex;align-items:center;justify-content:end;" *ngIf="uploadResult && uploadResult.hlsStreams">
        <span> {{ isGridView ? 'Grid' : 'Column' }} </span>
        <input type="checkbox" style="width:1.25rem;height:1.25rem;cursor:pointer;" (change)="toggleView()" />
     </div>

    <!-- Upload Result Section -->
    <ng-container *ngIf="uploadResult">

        <!-- <pre>{{ uploadResult | json }}</pre> -->

        <!-- Adaptive HLS Video Player Section -->
        <div [ngClass]="isGridView ? 'grid-view' : 'column-view'" class="video-container">
            <!-- Master Playlist Video -->
            <div *ngIf="uploadResult.masterPlaylistUrl" class="video-player-wrapper">
                <h4>Master Playlist HLS Player</h4>
                <p style="color: #007aff; font-size: 1rem;" *ngIf="!isGridView">This is the main HLS stream that adapts to different bitrates.</p>
                <p style="color: #007aff; font-size: 1rem;" *ngIf="isGridView">Adaptive HLS adapts to different bitrates.</p>
                <video id="video-player-master" class="video-js vjs-default-skin vjs-big-play-centered" 
                controls preload="auto" style="width: 100%; height: auto; border-radius:20px;">
                    <source [src]="uploadResult.masterPlaylistUrl" type="application/x-mpegURL" />
                    Your browser does not support HLS playback.
                </video>
            </div>
            
            <!-- Individual Resolution Streams -->
            <div *ngFor="let stream of uploadResult.hlsStreams" class="video-player-wrapper">
                <h4>{{ stream.resolution }} HLS Player</h4>
                <p style="color: #fff; font-size: 0.9rem;">Watch this video at {{ stream.resolution }} resolution.</p>
                <video id="video-player-{{ stream.resolution }}" class="video-js vjs-default-skin vjs-big-play-centered" 
                controls preload="auto" style="width: 100%; height: auto; border-radius:20px;">
                    <source [src]="stream.hlsUrl" type="application/x-mpegURL" />
                    Your browser does not support HLS playback.
                </video>
            </div>
        </div>
    </ng-container>
</div>

